<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Brunsviga 13RK request form</title>

  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link href="css/ie10-viewport-bug-workaround.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/navbar.css" rel="stylesheet">

  <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
  <!--[if lt IE 9]><script src="js/ie8-responsive-file-warning.js"></script><![endif]-->
  <script src="js/ie-emulation-modes-warning.js"></script>
  <script src="js/jquery-3.2.1.min.js"></script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

<body>

  <div class="container">

    <div class="jumbotron">
      <h1>MCaaS</h1>
      <p>For the expression to evaluate, list two natural numbers, each of 10 digits or less, either side of one of the +, -, / (divide), or * (multiply) operators, e.g. 54-3:
        <form id="myForm" action="https://e5takhv6kc.execute-api.ap-southeast-2.amazonaws.com/prod/sendBrunsvigaRequest" method="post">
          Expression to evaluate:<input type="text" id="request" request="" /><br />
          Your email address (required): <input type="text" id="email" email=""></textarea><br />
          <input type="submit" value="Submit request" />
        </form>
      </p>
      <p>
        Read about how this works <a href="https://github.com/matthewberryman/brunsviga"> on GitHub</a>.<br />Demo of the calculation of 6*7:<br />
        <iframe width="560" height="315" src="https://www.youtube.com/embed/pvgsz3y1V50" frameborder="0" allowfullscreen></iframe>
      </p>
      <script type='text/javascript'>

      /* attach a submit handler to the form */
      $("#myForm").submit(function(event) {

        /* stop form from submitting normally */
        event.preventDefault();

        /* get the action attribute from the <form action=""> element */

        $.ajax({
          type: "POST",
          url: "https://n978mw5su1.execute-api.ap-southeast-2.amazonaws.com/prod/sendBrunsvigaRequest" ,
          dataType: "json",
          contentType: "application/json",
          success: function (msg) {
            if (msg) {
              alert("Request submitted! Expect an email within a couple of days.");
              location.reload(true);
            } else {
              alert("Problem submitting request");
            }
          },
          error: function (request, status, error) {
            if (request.status && request.status==400) {
              alert("Invalid expression.");
            } else {
              alert(error);
            }
          },
          data: JSON.stringify({expression: $('#request').val() , email: $('#email').val() })
        });
      });
      </script>
    </div>

  </div> <!-- /container -->


  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="js/bootstrap.min.js"></script>
  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <script src="js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>
